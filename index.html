<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>BDO Combo Manager - Protected Edition</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #121212; 
            color: #e0e0e0; 
            padding: 20px; 
            /* BEVEILIGING: Voorkom tekstselectie */
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Zorg dat invoervelden w√©l blijven werken */
        input, select, textarea {
            -webkit-user-select: text;
            user-select: text;
        }

        .container { max-width: 750px; margin: auto; background: #1e1e1e; padding: 25px; border-radius: 12px; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h1 { color: #f2a900; text-align: center; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 1px; }
        .subtitle { text-align: center; color: #888; margin-bottom: 20px; font-size: 0.85em; }
        
        .section { margin-bottom: 20px; padding: 15px; background: #252525; border-radius: 8px; border: 1px solid #333; }
        label { display: block; margin-bottom: 5px; font-weight: bold; color: #aaa; font-size: 0.9em; }
        
        input, select, button { width: 100%; padding: 12px; margin-top: 5px; border-radius: 6px; border: 1px solid #444; background: #111; color: white; box-sizing: border-box; font-size: 14px; }
        
        .platform-toggle { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .platform-toggle label { background: #333; padding: 10px 20px; border-radius: 20px; cursor: pointer; border: 1px solid #444; font-size: 0.9em; transition: 0.2s; }
        .platform-toggle input { display: none; }
        .platform-toggle input:checked + label { background: #f2a900; color: black; font-weight: bold; border-color: #f2a900; }

        .combo-visual { margin: 15px 0; display: flex; flex-wrap: wrap; align-items: center; gap: 8px; min-height: 40px; padding: 10px; background: #1a1a1a; border-radius: 6px; }
        .key-cap { 
            background: #444; border: 1px solid #666; padding: 4px 10px; border-radius: 5px; 
            font-weight: bold; color: #fff; font-family: 'Courier New', monospace; box-shadow: 0 2px 0 #000;
        }
        .ps-style { background: #003791; border-color: #004dc3; }
        .xbox-style { background: #107c10; border-color: #159e15; }
        
        .arrow { color: #f2a900; font-weight: bold; font-size: 18px; }
        .loadout-card { background: #2a2a2a; padding: 15px; margin-top: 15px; border-radius: 8px; border-left: 5px solid #f2a900; position: relative; }
        
        .card-actions { position: absolute; top: 15px; right: 15px; display: flex; gap: 10px; }
        .btn-small { width: auto; padding: 6px 12px; cursor: pointer; border-radius: 4px; border: none; font-size: 11px; font-weight: bold; color: white; }
        .btn-copy { background: #444; }
        .btn-delete { background: #cc3333; }
        
        .class-badge { background: #f2a900; color: black; padding: 2px 10px; border-radius: 4px; font-size: 11px; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; display: inline-block; }
        .loadout-title { display: block; font-size: 1.1em; font-weight: bold; margin: 5px 0; color: #fff; }
    </style>
</head>
<body>

<div class="container">
    <h1>BDO Combo Manager</h1>
    <div class="subtitle">Select your class, paste your PC combo (for instance: Striker, W+RMB - Spacebar - Hold Spacebar - Shift+F) and press ADD. You can now save it for later and view the Playstation and XBOX conversion.</div>

    <div class="platform-toggle">
        <input type="radio" name="platform" id="pc" value="pc" onchange="displaySaved()">
        <label for="pc">‚å®Ô∏è PC</label>
        <input type="radio" name="platform" id="ps" value="ps" checked onchange="displaySaved()">
        <label for="ps">üéÆ PlayStation</label>
        <input type="radio" name="platform" id="xbox" value="xbox" onchange="displaySaved()">
        <label for="xbox">üéÆ Xbox</label>
    </div>

    <div class="section">
        <label>Klasse & Naam:</label>
        <div style="display: flex; gap: 10px;">
            <select id="classSelect" style="flex: 1.2;">
                <option>Warrior</option><option>Ranger</option><option>Sorceress</option><option>Berserker</option><option>Tamer</option><option>Musa</option><option>Maehwa</option><option>Valkyrie</option><option>Kunoichi</option><option>Ninja</option><option>Wizard</option><option>Witch</option><option>Dark Knight</option><option>Striker</option><option>Mystic</option><option>Lahn</option><option>Archer</option><option>Shai</option><option>Guardian</option><option>Hashashin</option><option>Nova</option><option>Sage</option><option>Corsair</option><option>Drakania</option><option>Woosa</option><option>Maegu</option><option>Scholar</option><option>Dosa</option>
            </select>
            <input type="text" id="loadoutName" placeholder="Bijv. Grind Combo">
        </div>
    </div>

    <div class="section">
        <label>Combo Invoeren (PC Toetsen):</label>
        <input type="text" id="pcInput" placeholder="Bijv: W+RMB, Shift-F, Space">
        <button onclick="addSteps()" style="background:#444; color:white; margin-top:10px;">‚ûï Toevoegen</button>
        <div id="currentPreview" class="combo-visual"></div>
        <div style="display: flex; gap: 10px;">
            <button onclick="saveLoadout()" style="flex: 2; background:#f2a900; color:black;">üíæ Opslaan</button>
            <button onclick="clearCurrent()" style="flex: 1; background:#555; color:white;">Reset</button>
        </div>
    </div>

    <input type="text" id="searchBar" placeholder="Zoek op klasse of naam..." style="background:#111; margin-bottom: 10px;" onkeyup="displaySaved()">
    <div id="savedLoadouts"></div>
</div>

<script>
    /* BEVEILIGING: Blokkeer Rechtermuisknop & Sneltoetsen */
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.onkeydown = function(e) {
        if (e.ctrlKey && (e.keyCode === 85 || e.keyCode === 83 || e.keyCode === 67 || (e.shiftKey && e.keyCode === 73))) return false;
        if (e.keyCode === 123) return false;
    };

    const layouts = {
        ps: { 'LMB': 'R1', 'RMB': 'R2', 'Q': 'L1', 'Shift': 'L2', 'Space': 'X', 'Spacebar': 'X', 'E': '‚ñ°', 'F': '‚óã', 'C': '‚ñ≥', 'W': 'Forward', 'A': 'Left', 'S': 'Back', 'D': 'Right' },
        xbox: { 'LMB': 'RB', 'RMB': 'RT', 'Q': 'LB', 'Shift': 'LT', 'Space': 'A', 'Spacebar': 'A', 'E': 'X', 'F': 'B', 'C': 'Y', 'W': 'Forward', 'A': 'Left', 'S': 'Back', 'D': 'Right' }
    };

    let currentSteps = [];

    function translate(step, platform) {
        if (platform === 'pc') return step;
        return step.split('+').map(key => {
            const k = key.trim();
            const upperK = k.toUpperCase();
            return layouts[platform][k] || layouts[platform][upperK] || k;
        }).join('+');
    }

    function addSteps() {
        const input = document.getElementById('pcInput').value.trim();
        if (!input) return;
        input.split(/[- ,]+/).forEach(s => { if(s) currentSteps.push(s.trim()); });
        updateDisplay();
        document.getElementById('pcInput').value = "";
    }

    function updateDisplay() {
        const platform = document.querySelector('input[name="platform"]:checked').value;
        const display = document.getElementById('currentPreview');
        if (currentSteps.length === 0) { display.innerHTML = ""; return; }
        display.innerHTML = currentSteps.map(s => `<span class="key-cap ${platform === 'pc' ? '' : platform + '-style'}">${translate(s, platform)}</span>`).join('<span class="arrow">‚Üí</span>');
    }

    function clearCurrent() { currentSteps = []; updateDisplay(); }

    function saveLoadout() {
        const name = document.getElementById('loadoutName').value || "Mijn Combo";
        const bdoClass = document.getElementById('classSelect').value;
        if (currentSteps.length === 0) return;
        const loadouts = JSON.parse(localStorage.getItem('bdo_v10_loadouts') || "[]");
        loadouts.push({ id: Date.now(), class: bdoClass, name: name, steps: [...currentSteps] });
        localStorage.setItem('bdo_v10_loadouts', JSON.stringify(loadouts));
        clearCurrent();
        displaySaved();
    }

    function copyToClipboard(id) {
        const platform = document.querySelector('input[name="platform"]:checked').value;
        const loadouts = JSON.parse(localStorage.getItem('bdo_v10_loadouts') || "[]");
        const loadout = loadouts.find(l => l.id === id);
        if (loadout) {
            const text = loadout.steps.map(s => translate(s, platform)).join(' ‚Üí ');
            navigator.clipboard.writeText(text).then(() => {
                alert("Combo gekopieerd naar klembord!");
            });
        }
    }

    function displaySaved() {
        const platform = document.querySelector('input[name="platform"]:checked').value;
        const searchTerm = document.getElementById('searchBar').value.toLowerCase();
        const container = document.getElementById('savedLoadouts');
        const loadouts = JSON.parse(localStorage.getItem('bdo_v10_loadouts') || "[]");
        updateDisplay();
        const filtered = loadouts.filter(l => l.class.toLowerCase().includes(searchTerm) || l.name.toLowerCase().includes(searchTerm));
        container.innerHTML = filtered.reverse().map(l => `
            <div class="loadout-card">
                <div class="card-actions">
                    <button class="btn-small btn-copy" onclick="copyToClipboard(${l.id})">üìã Kopieer</button>
                    <button class="btn-small btn-delete" onclick="deleteL(${l.id})">Wissen</button>
                </div>
                <span class="class-badge">${l.class}</span>
                <span class="loadout-title">${l.name}</span>
                <div class="combo-visual">
                    ${l.steps.map(s => `<span class="key-cap ${platform === 'pc' ? '' : platform + '-style'}">${translate(s, platform)}</span>`).join('<span class="arrow" style="font-size:14px;">‚ñ∂</span>')}
                </div>
            </div>
        `).join('');
    }

    function deleteL(id) {
        let loadouts = JSON.parse(localStorage.getItem('bdo_v10_loadouts') || "[]");
        localStorage.setItem('bdo_v10_loadouts', JSON.stringify(loadouts.filter(l => l.id !== id)));
        displaySaved();
    }

    displaySaved();
</script>
</body>
</html>